# å›½é™…åŒ–ï¼ˆi18nï¼‰è§„èŒƒï¼ˆå¯é€‰ï¼‰

> ä½¿ç”¨ react-i18next å®ç°å¤šè¯­è¨€æ”¯æŒçš„è§„èŒƒ

## é€‚ç”¨åœºæ™¯

å¦‚æœé¡¹ç›®éœ€è¦æ”¯æŒå¤šè¯­è¨€ï¼Œä½¿ç”¨æœ¬è§„èŒƒã€‚

## æŠ€æœ¯é€‰å‹

- **i18n åº“**ï¼šreact-i18next
- **ä¾èµ–**ï¼ši18nextã€react-i18next
- **æ ¼å¼**ï¼šJSON æ–‡ä»¶å­˜å‚¨è¯­æ–™

## å®‰è£…é…ç½®

### å®‰è£…ä¾èµ–

```bash
pnpm install i18next react-i18next
```

### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ locales/                    # å¤šè¯­è¨€æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ zh-CN/                 # ä¸­æ–‡ç®€ä½“
â”‚   â”‚   â”œâ”€â”€ common.json        # é€šç”¨è¯­æ–™
â”‚   â”‚   â”œâ”€â”€ pages.json         # é¡µé¢è¯­æ–™
â”‚   â”‚   â”œâ”€â”€ components.json    # ç»„ä»¶è¯­æ–™
â”‚   â”‚   â””â”€â”€ messages.json      # æç¤ºæ¶ˆæ¯
â”‚   â”œâ”€â”€ en-US/                 # è‹±æ–‡
â”‚   â”‚   â”œâ”€â”€ common.json
â”‚   â”‚   â”œâ”€â”€ pages.json
â”‚   â”‚   â”œâ”€â”€ components.json
â”‚   â”‚   â””â”€â”€ messages.json
â”‚   â””â”€â”€ index.js               # i18n é…ç½®å…¥å£
â”‚
â”œâ”€â”€ components/
â”œâ”€â”€ pages/
â””â”€â”€ main.jsx
```

### åŸºç¡€é…ç½®

```javascript
// src/locales/index.js
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'

// å¯¼å…¥è¯­æ–™æ–‡ä»¶
import zhCN_common from './zh-CN/common.json'
import zhCN_pages from './zh-CN/pages.json'
import zhCN_components from './zh-CN/components.json'
import zhCN_messages from './zh-CN/messages.json'

import enUS_common from './en-US/common.json'
import enUS_pages from './en-US/pages.json'
import enUS_components from './en-US/components.json'
import enUS_messages from './en-US/messages.json'

// é…ç½®èµ„æº
const resources = {
  'zh-CN': {
    common: zhCN_common,
    pages: zhCN_pages,
    components: zhCN_components,
    messages: zhCN_messages,
  },
  'en-US': {
    common: enUS_common,
    pages: enUS_pages,
    components: enUS_components,
    messages: enUS_messages,
  },
}

// åˆå§‹åŒ– i18n
i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: localStorage.getItem('language') || 'zh-CN', // é»˜è®¤è¯­è¨€
    fallbackLng: 'zh-CN', // å›é€€è¯­è¨€
    interpolation: {
      escapeValue: false, // React å·²ç»å¤„ç†äº† XSS
    },
    ns: ['common', 'pages', 'components', 'messages'], // å‘½åç©ºé—´
    defaultNS: 'common', // é»˜è®¤å‘½åç©ºé—´
  })

export default i18n
```

```jsx
// src/main.jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './locales' // å¯¼å…¥ i18n é…ç½®

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
)
```

## è¯­æ–™æ–‡ä»¶ç»„ç»‡

### å‘½åç©ºé—´åˆ’åˆ†

æ¨èæŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†å‘½åç©ºé—´ï¼š

1. **common** - é€šç”¨è¯­æ–™ï¼ˆæŒ‰é’®ã€æ ‡ç­¾ã€å¸¸ç”¨è¯ï¼‰
2. **pages** - é¡µé¢ç‰¹å®šè¯­æ–™
3. **components** - ç»„ä»¶ç‰¹å®šè¯­æ–™
4. **messages** - æç¤ºæ¶ˆæ¯ï¼ˆæˆåŠŸã€é”™è¯¯ã€è­¦å‘Šï¼‰

### è¯­æ–™æ–‡ä»¶ç¤ºä¾‹

```json
// src/locales/zh-CN/common.json
{
  "app": {
    "title": "æˆ‘çš„åº”ç”¨",
    "description": "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹åº”ç”¨"
  },
  "button": {
    "submit": "æäº¤",
    "cancel": "å–æ¶ˆ",
    "confirm": "ç¡®è®¤",
    "delete": "åˆ é™¤",
    "edit": "ç¼–è¾‘",
    "save": "ä¿å­˜",
    "search": "æœç´¢"
  },
  "label": {
    "name": "å§“å",
    "email": "é‚®ç®±",
    "phone": "ç”µè¯",
    "address": "åœ°å€",
    "status": "çŠ¶æ€"
  },
  "status": {
    "active": "æ´»è·ƒ",
    "inactive": "æœªæ¿€æ´»",
    "pending": "å¾…å¤„ç†"
  },
  "time": {
    "today": "ä»Šå¤©",
    "yesterday": "æ˜¨å¤©",
    "week": "æœ¬å‘¨",
    "month": "æœ¬æœˆ"
  }
}
```

```json
// src/locales/zh-CN/pages.json
{
  "home": {
    "title": "é¦–é¡µ",
    "welcome": "æ¬¢è¿å›æ¥ï¼Œ{{name}}ï¼",
    "description": "è¿™æ˜¯é¦–é¡µå†…å®¹"
  },
  "user": {
    "title": "ç”¨æˆ·ç®¡ç†",
    "list": {
      "title": "ç”¨æˆ·åˆ—è¡¨",
      "empty": "æš‚æ— ç”¨æˆ·æ•°æ®",
      "total": "å…± {{count}} ä¸ªç”¨æˆ·"
    },
    "detail": {
      "title": "ç”¨æˆ·è¯¦æƒ…",
      "info": "åŸºæœ¬ä¿¡æ¯",
      "createdAt": "åˆ›å»ºæ—¶é—´ï¼š{{date}}"
    },
    "form": {
      "create": "åˆ›å»ºç”¨æˆ·",
      "edit": "ç¼–è¾‘ç”¨æˆ·",
      "placeholder": {
        "name": "è¯·è¾“å…¥å§“å",
        "email": "è¯·è¾“å…¥é‚®ç®±"
      }
    }
  }
}
```

```json
// src/locales/zh-CN/components.json
{
  "userCard": {
    "viewProfile": "æŸ¥çœ‹èµ„æ–™",
    "followers": "{{count}} ä¸ªå…³æ³¨è€…",
    "following": "å…³æ³¨ä¸­"
  },
  "pagination": {
    "prev": "ä¸Šä¸€é¡µ",
    "next": "ä¸‹ä¸€é¡µ",
    "page": "ç¬¬ {{current}} é¡µï¼Œå…± {{total}} é¡µ"
  },
  "header": {
    "home": "é¦–é¡µ",
    "about": "å…³äº",
    "contact": "è”ç³»æˆ‘ä»¬",
    "login": "ç™»å½•",
    "logout": "é€€å‡º"
  }
}
```

```json
// src/locales/zh-CN/messages.json
{
  "success": {
    "created": "åˆ›å»ºæˆåŠŸ",
    "updated": "æ›´æ–°æˆåŠŸ",
    "deleted": "åˆ é™¤æˆåŠŸ",
    "saved": "ä¿å­˜æˆåŠŸ"
  },
  "error": {
    "network": "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",
    "required": "{{field}} ä¸èƒ½ä¸ºç©º",
    "invalid": "{{field}} æ ¼å¼ä¸æ­£ç¡®",
    "notFound": "æœªæ‰¾åˆ°ç›¸å…³æ•°æ®",
    "serverError": "æœåŠ¡å™¨é”™è¯¯",
    "unauthorized": "æœªæˆæƒï¼Œè¯·å…ˆç™»å½•"
  },
  "warning": {
    "unsaved": "æœ‰æœªä¿å­˜çš„æ›´æ”¹",
    "confirmDelete": "ç¡®å®šè¦åˆ é™¤ {{name}} å—ï¼Ÿ"
  },
  "info": {
    "loading": "åŠ è½½ä¸­...",
    "processing": "å¤„ç†ä¸­...",
    "noData": "æš‚æ— æ•°æ®"
  }
}
```

### å¯¹åº”çš„è‹±æ–‡è¯­æ–™

```json
// src/locales/en-US/common.json
{
  "app": {
    "title": "My App",
    "description": "This is a sample application"
  },
  "button": {
    "submit": "Submit",
    "cancel": "Cancel",
    "confirm": "Confirm",
    "delete": "Delete",
    "edit": "Edit",
    "save": "Save",
    "search": "Search"
  },
  "label": {
    "name": "Name",
    "email": "Email",
    "phone": "Phone",
    "address": "Address",
    "status": "Status"
  },
  "status": {
    "active": "Active",
    "inactive": "Inactive",
    "pending": "Pending"
  },
  "time": {
    "today": "Today",
    "yesterday": "Yesterday",
    "week": "This Week",
    "month": "This Month"
  }
}
```

## ä½¿ç”¨æ–¹æ³•

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```jsx
// src/components/UserCard/index.jsx
import { useTranslation } from 'react-i18next'
import './styles.css'

function UserCard({ user }) {
  const { t } = useTranslation('components') // æŒ‡å®šå‘½åç©ºé—´

  return (
    <div className="user-card">
      <img src={user.avatar} alt={user.name} />
      <h3>{user.name}</h3>
      <p>{t('userCard.followers', { count: user.followers })}</p>
      <button>{t('userCard.viewProfile')}</button>
    </div>
  )
}

export default UserCard
```

### åœ¨é¡µé¢ä¸­ä½¿ç”¨

```jsx
// src/pages/UserManagement/index.jsx
import { useState, useEffect } from 'react'
import { useTranslation } from 'react-i18next'
import { userAPI } from '../../api/user'
import UserCard from '../../components/UserCard'
import './styles.css'

function UserManagement() {
  const { t } = useTranslation(['pages', 'messages']) // ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´
  const [users, setUsers] = useState([])
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)

  useEffect(() => {
    loadUsers()
  }, [])

  const loadUsers = async () => {
    try {
      setLoading(true)
      setError(null)
      const data = await userAPI.getList()
      setUsers(data)
    } catch (err) {
      setError(t('messages:error.network'))
    } finally {
      setLoading(false)
    }
  }

  if (loading) return <div>{t('messages:info.loading')}</div>
  if (error) return <div>{error}</div>
  if (users.length === 0) return <div>{t('pages:user.list.empty')}</div>

  return (
    <div className="user-management">
      <h1>{t('pages:user.title')}</h1>
      <p>{t('pages:user.list.total', { count: users.length })}</p>
      <div className="user-list">
        {users.map(user => (
          <UserCard key={user.id} user={user} />
        ))}
      </div>
    </div>
  )
}

export default UserManagement
```

### ä½¿ç”¨é»˜è®¤å‘½åç©ºé—´

```jsx
// å¦‚æœä½¿ç”¨ commonï¼ˆé»˜è®¤å‘½åç©ºé—´ï¼‰ï¼Œå¯ä»¥çœç•¥å‰ç¼€
import { useTranslation } from 'react-i18next'

function MyButton() {
  const { t } = useTranslation() // é»˜è®¤ä½¿ç”¨ common

  return (
    <button>{t('button.submit')}</button> // ç­‰åŒäº t('common:button.submit')
  )
}
```

### åˆ‡æ¢è¯­è¨€

```jsx
// src/components/LanguageSwitcher/index.jsx
import { useTranslation } from 'react-i18next'
import './styles.css'

function LanguageSwitcher() {
  const { i18n } = useTranslation()

  const changeLanguage = (lng) => {
    i18n.changeLanguage(lng)
    localStorage.setItem('language', lng) // ä¿å­˜è¯­è¨€é€‰æ‹©
  }

  return (
    <div className="language-switcher">
      <button
        onClick={() => changeLanguage('zh-CN')}
        className={i18n.language === 'zh-CN' ? 'active' : ''}
      >
        ä¸­æ–‡
      </button>
      <button
        onClick={() => changeLanguage('en-US')}
        className={i18n.language === 'en-US' ? 'active' : ''}
      >
        English
      </button>
    </div>
  )
}

export default LanguageSwitcher
```

## é«˜çº§ç”¨æ³•

### å˜é‡æ’å€¼

```json
// è¯­æ–™æ–‡ä»¶
{
  "welcome": "æ¬¢è¿ï¼Œ{{name}}ï¼",
  "itemCount": "æ‚¨æœ‰ {{count}} ä¸ªé¡¹ç›®"
}
```

```jsx
// ç»„ä»¶ä¸­ä½¿ç”¨
t('welcome', { name: 'å¼ ä¸‰' })
// è¾“å‡ºï¼šæ¬¢è¿ï¼Œå¼ ä¸‰ï¼

t('itemCount', { count: 5 })
// è¾“å‡ºï¼šæ‚¨æœ‰ 5 ä¸ªé¡¹ç›®
```

### å¤æ•°å½¢å¼

```json
// è¯­æ–™æ–‡ä»¶
{
  "itemCount": "æ‚¨æœ‰ {{count}} ä¸ªé¡¹ç›®",
  "itemCount_zero": "æ‚¨æ²¡æœ‰é¡¹ç›®",
  "itemCount_one": "æ‚¨æœ‰ 1 ä¸ªé¡¹ç›®",
  "itemCount_other": "æ‚¨æœ‰ {{count}} ä¸ªé¡¹ç›®"
}
```

```jsx
// ä½¿ç”¨
t('itemCount', { count: 0 }) // æ‚¨æ²¡æœ‰é¡¹ç›®
t('itemCount', { count: 1 }) // æ‚¨æœ‰ 1 ä¸ªé¡¹ç›®
t('itemCount', { count: 5 }) // æ‚¨æœ‰ 5 ä¸ªé¡¹ç›®
```

### åµŒå¥—ç¿»è¯‘

```json
{
  "user": {
    "profile": {
      "name": "å§“å",
      "email": "é‚®ç®±",
      "settings": {
        "title": "è®¾ç½®",
        "privacy": "éšç§è®¾ç½®"
      }
    }
  }
}
```

```jsx
t('user.profile.name') // å§“å
t('user.profile.settings.title') // è®¾ç½®
```

### æ•°ç»„ç¿»è¯‘

```json
{
  "steps": [
    "ç¬¬ä¸€æ­¥ï¼šå¡«å†™ä¿¡æ¯",
    "ç¬¬äºŒæ­¥ï¼šç¡®è®¤æäº¤",
    "ç¬¬ä¸‰æ­¥ï¼šå®Œæˆ"
  ]
}
```

```jsx
t('steps.0') // ç¬¬ä¸€æ­¥ï¼šå¡«å†™ä¿¡æ¯
t('steps.1') // ç¬¬äºŒæ­¥ï¼šç¡®è®¤æäº¤
```

### æ ¼å¼åŒ–æ—¥æœŸå’Œæ•°å­—

```jsx
import { useTranslation } from 'react-i18next'

function MyComponent() {
  const { t, i18n } = useTranslation()

  // æ ¼å¼åŒ–æ—¥æœŸ
  const date = new Date()
  const formattedDate = date.toLocaleDateString(i18n.language)

  // æ ¼å¼åŒ–æ•°å­—
  const number = 1234567.89
  const formattedNumber = number.toLocaleString(i18n.language)

  return (
    <div>
      <p>{formattedDate}</p>
      <p>{formattedNumber}</p>
    </div>
  )
}
```

## å‘½åè§„èŒƒ

### è¯­æ–™ Key å‘½å

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| é¡µé¢æ ‡é¢˜ | `<page>.title` | `user.title` |
| æŒ‰é’®æ–‡æœ¬ | `button.<action>` | `button.submit` |
| æ ‡ç­¾æ–‡æœ¬ | `label.<field>` | `label.name` |
| æç¤ºæ¶ˆæ¯ | `<type>.<action>` | `success.created` |
| å ä½ç¬¦ | `placeholder.<field>` | `placeholder.email` |
| çŠ¶æ€æ–‡æœ¬ | `status.<state>` | `status.active` |

### å‘½åç©ºé—´å‘½å

| å‘½åç©ºé—´ | ç”¨é€” | æ–‡ä»¶å |
|---------|------|--------|
| common | é€šç”¨è¯­æ–™ï¼ˆæŒ‰é’®ã€æ ‡ç­¾ï¼‰ | `common.json` |
| pages | é¡µé¢ç‰¹å®šè¯­æ–™ | `pages.json` |
| components | ç»„ä»¶ç‰¹å®šè¯­æ–™ | `components.json` |
| messages | æç¤ºæ¶ˆæ¯ | `messages.json` |
| errors | é”™è¯¯æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰ | `errors.json` |
| validation | è¡¨å•éªŒè¯ï¼ˆå¯é€‰ï¼‰ | `validation.json` |

### è¯­è¨€ä»£ç 

ä½¿ç”¨æ ‡å‡†çš„è¯­è¨€-åœ°åŒºä»£ç ï¼š

- `zh-CN` - ä¸­æ–‡ç®€ä½“
- `zh-TW` - ä¸­æ–‡ç¹ä½“
- `en-US` - è‹±è¯­ï¼ˆç¾å›½ï¼‰
- `en-GB` - è‹±è¯­ï¼ˆè‹±å›½ï¼‰
- `ja-JP` - æ—¥è¯­
- `ko-KR` - éŸ©è¯­

## è¯­è¨€æ ·å¼å…¼å®¹

### æ ¹èŠ‚ç‚¹è¯­è¨€æ ‡è¯†

ä¸ºäº†æ”¯æŒä¸åŒè¯­è¨€çš„æ ·å¼é€‚é…ï¼Œéœ€è¦åœ¨æ ¹èŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯ `<html>` æˆ– `#root`ï¼‰æ·»åŠ è¯­è¨€æ ‡è¯† classNameã€‚

#### å®ç°æ–¹å¼

**æ–¹æ³• 1ï¼šåœ¨ App.jsx ä¸­è®¾ç½®ï¼ˆæ¨èï¼‰**

```jsx
// src/App.jsx
import { useEffect } from 'react'
import { useTranslation } from 'react-i18next'

function App() {
  const { i18n } = useTranslation()

  useEffect(() => {
    // åœ¨æ ¹å…ƒç´ æ·»åŠ è¯­è¨€ class
    const root = document.getElementById('root')
    if (root) {
      // ç§»é™¤æ—§çš„è¯­è¨€ class
      root.classList.remove('lang-zh-CN', 'lang-en-US')
      // æ·»åŠ å½“å‰è¯­è¨€ class
      root.classList.add(`lang-${i18n.language}`)
    }

    // åŒæ—¶è®¾ç½® html çš„ lang å±æ€§ï¼ˆæœ‰åˆ©äº SEO å’Œè¾…åŠ©åŠŸèƒ½ï¼‰
    document.documentElement.lang = i18n.language
  }, [i18n.language])

  return (
    <div className="app">
      {/* åº”ç”¨å†…å®¹ */}
    </div>
  )
}

export default App
```

**æ–¹æ³• 2ï¼šåœ¨ i18n é…ç½®ä¸­å…¨å±€è®¾ç½®**

```javascript
// src/locales/index.js
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'

i18n
  .use(initReactI18next)
  .init({
    // ... å…¶ä»–é…ç½®
  })

// ç›‘å¬è¯­è¨€å˜åŒ–
i18n.on('languageChanged', (lng) => {
  const root = document.getElementById('root')
  if (root) {
    root.classList.remove('lang-zh-CN', 'lang-en-US')
    root.classList.add(`lang-${lng}`)
  }
  document.documentElement.lang = lng
})

export default i18n
```

### è¯­è¨€æ ·å¼é€‚é…è§„åˆ™

#### ä¸­æ–‡å’Œè‹±æ–‡çš„ä¸»è¦å·®å¼‚

| ç‰¹æ€§ | ä¸­æ–‡ | è‹±æ–‡ |
|------|------|------|
| æ–‡æœ¬é•¿åº¦ | é€šå¸¸è¾ƒçŸ­ | é€šå¸¸è¾ƒé•¿ï¼ˆ1.5-2 å€ï¼‰ |
| å•è¯æ¢è¡Œ | å¯ä»¥åœ¨ä»»æ„å­—ç¬¦æ¢è¡Œ | éœ€è¦åœ¨ç©ºæ ¼æˆ–è¿å­—ç¬¦å¤„æ¢è¡Œ |
| å­—ä½“ | éœ€è¦ä¸­æ–‡å­—ä½“ | è‹±æ–‡å­—ä½“å³å¯ |
| å­—é—´è· | é€šå¸¸ä¸éœ€è¦ | å¯èƒ½éœ€è¦ letter-spacing |
| è¡Œé«˜ | 1.5-1.8 è¾ƒåˆé€‚ | 1.4-1.6 è¾ƒåˆé€‚ |

#### æ ·å¼é€‚é…ç¤ºä¾‹

**åŸºç¡€æ ·å¼é€‚é…ï¼š**

```css
/* å…¨å±€æ ·å¼ */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
}

/* ä¸­æ–‡å­—ä½“ */
.lang-zh-CN {
  font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Microsoft YaHei',
               'å¾®è½¯é›…é»‘', 'Hiragino Sans GB', sans-serif;
}

/* è‹±æ–‡å­—ä½“ */
.lang-en-US {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue',
               Arial, sans-serif;
}
```

**æ–‡æœ¬é•¿åº¦é€‚é…ï¼š**

```css
/* æŒ‰é’®å®½åº¦é€‚é… */
.button {
  min-width: 80px;
  padding: 8px 16px;
}

.lang-zh-CN .button {
  min-width: 60px; /* ä¸­æ–‡è¾ƒçŸ­ */
  padding: 8px 12px;
}

.lang-en-US .button {
  min-width: 100px; /* è‹±æ–‡è¾ƒé•¿ */
  padding: 8px 20px;
}

/* æ ‡é¢˜æ–‡æœ¬ */
.page-title {
  font-size: 24px;
  line-height: 1.5;
}

.lang-zh-CN .page-title {
  letter-spacing: 0.5px; /* ä¸­æ–‡å¯ä»¥å¢åŠ å­—é—´è· */
  line-height: 1.6;
}

.lang-en-US .page-title {
  letter-spacing: 0;
  line-height: 1.4;
}
```

**æ¢è¡Œå’Œæº¢å‡ºå¤„ç†ï¼š**

```css
/* æ–‡æœ¬æ¢è¡Œ */
.text-content {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* ä¸­æ–‡å¯ä»¥åœ¨ä»»æ„ä½ç½®æ¢è¡Œ */
.lang-zh-CN .text-content {
  word-break: break-all;
}

/* è‹±æ–‡åœ¨å•è¯è¾¹ç•Œæ¢è¡Œ */
.lang-en-US .text-content {
  word-break: break-word;
  hyphens: auto; /* å¯ç”¨è¿å­—ç¬¦ */
}

/* å•è¡Œçœç•¥ */
.text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 200px;
}

.lang-zh-CN .text-ellipsis {
  max-width: 150px; /* ä¸­æ–‡è¾ƒçŸ­ */
}

.lang-en-US .text-ellipsis {
  max-width: 250px; /* è‹±æ–‡è¾ƒé•¿ */
}
```

**å¸ƒå±€é€‚é…ï¼š**

```css
/* è¡¨å•æ ‡ç­¾å®½åº¦ */
.form-label {
  display: inline-block;
  width: 100px;
  text-align: right;
}

.lang-zh-CN .form-label {
  width: 80px; /* ä¸­æ–‡æ ‡ç­¾é€šå¸¸è¾ƒçŸ­ */
}

.lang-en-US .form-label {
  width: 120px; /* è‹±æ–‡æ ‡ç­¾è¾ƒé•¿ */
}

/* å¡ç‰‡æ ‡é¢˜ */
.card-title {
  height: 40px;
  display: flex;
  align-items: center;
}

.lang-zh-CN .card-title {
  height: 36px; /* ä¸­æ–‡é€šå¸¸å•è¡Œ */
}

.lang-en-US .card-title {
  height: 48px; /* è‹±æ–‡å¯èƒ½éœ€è¦ä¸¤è¡Œ */
}
```

### Less ä¸­çš„è¯­è¨€æ ·å¼é€‚é…

å¦‚æœä½¿ç”¨ Lessï¼Œå¯ä»¥åˆ›å»ºè¯­è¨€é€‚é…æ··å…¥ï¼š

```less
// src/assets/styles/mixins.less

// è¯­è¨€é€‚é…æ··å…¥
.lang-specific(@zh-rules, @en-rules) {
  .lang-zh-CN & {
    @zh-rules();
  }

  .lang-en-US & {
    @en-rules();
  }
}

// ä½¿ç”¨ç¤ºä¾‹
.button {
  min-width: 80px;
  padding: 8px 16px;

  .lang-specific({
    // ä¸­æ–‡æ ·å¼
    min-width: 60px;
    padding: 8px 12px;
  }, {
    // è‹±æ–‡æ ·å¼
    min-width: 100px;
    padding: 8px 20px;
  });
}
```

### å®Œæ•´ç»„ä»¶ç¤ºä¾‹

```jsx
// src/components/UserCard/index.jsx
import { useTranslation } from 'react-i18next'
import PropTypes from 'prop-types'
import './styles.css'

/**
 * ç”¨æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆæ”¯æŒ i18n æ ·å¼é€‚é…ï¼‰
 */
function UserCard({ user, onViewProfile }) {
  const { t } = useTranslation('components')

  return (
    <div className="user-card">
      <div className="user-card__avatar">
        <img src={user.avatar} alt={user.name} />
      </div>
      <div className="user-card__info">
        <h3 className="user-card__name">{user.name}</h3>
        <p className="user-card__bio">{user.bio}</p>
        <div className="user-card__stats">
          <span className="stat-item">
            {t('userCard.followers', { count: user.followers })}
          </span>
          <span className="stat-item">
            {t('userCard.following', { count: user.following })}
          </span>
        </div>
        <button
          className="user-card__button"
          onClick={() => onViewProfile(user.id)}
        >
          {t('userCard.viewProfile')}
        </button>
      </div>
    </div>
  )
}

UserCard.propTypes = {
  user: PropTypes.shape({
    id: PropTypes.number.isRequired,
    name: PropTypes.string.isRequired,
    avatar: PropTypes.string,
    bio: PropTypes.string,
    followers: PropTypes.number,
    following: PropTypes.number,
  }).isRequired,
  onViewProfile: PropTypes.func.isRequired,
}

export default UserCard
```

```css
/* src/components/UserCard/styles.css */

.user-card {
  display: flex;
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
}

.user-card__avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}

.user-card__avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.user-card__info {
  flex: 1;
  margin-left: 16px;
}

.user-card__name {
  margin: 0 0 8px;
  font-size: 18px;
  font-weight: 600;
  line-height: 1.5;
}

/* ä¸­æ–‡å§“åæ ·å¼ */
.lang-zh-CN .user-card__name {
  letter-spacing: 0.5px;
}

.user-card__bio {
  margin: 0 0 12px;
  font-size: 14px;
  color: #666;
  line-height: 1.6;
  max-height: 48px;
  overflow: hidden;
}

/* ä¸­æ–‡ç®€ä»‹ï¼šå¯ä»¥åœ¨ä»»æ„ä½ç½®æ¢è¡Œ */
.lang-zh-CN .user-card__bio {
  word-break: break-all;
}

/* è‹±æ–‡ç®€ä»‹ï¼šåœ¨å•è¯è¾¹ç•Œæ¢è¡Œ */
.lang-en-US .user-card__bio {
  word-break: break-word;
  hyphens: auto;
}

.user-card__stats {
  display: flex;
  gap: 16px;
  margin-bottom: 12px;
}

.stat-item {
  font-size: 13px;
  color: #999;
}

/* ä¸­æ–‡ç»Ÿè®¡æ–‡æœ¬è¾ƒçŸ­ */
.lang-zh-CN .stat-item {
  min-width: 60px;
}

/* è‹±æ–‡ç»Ÿè®¡æ–‡æœ¬è¾ƒé•¿ */
.lang-en-US .stat-item {
  min-width: 80px;
}

.user-card__button {
  padding: 6px 16px;
  background-color: #1890ff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  min-width: 80px;
}

/* ä¸­æ–‡æŒ‰é’® */
.lang-zh-CN .user-card__button {
  min-width: 60px;
  padding: 6px 12px;
}

/* è‹±æ–‡æŒ‰é’® */
.lang-en-US .user-card__button {
  min-width: 100px;
  padding: 6px 20px;
}

.user-card__button:hover {
  background-color: #40a9ff;
}
```

### å¸¸è§åœºæ™¯çš„é€‚é…æ¨¡å¼

#### 1. æŒ‰é’®å’Œé“¾æ¥

```css
/* ä¸»è¦æ“ä½œæŒ‰é’® */
.btn-primary {
  padding: 10px 24px;
  min-width: 100px;
}

.lang-zh-CN .btn-primary {
  padding: 10px 20px;
  min-width: 80px;
}

.lang-en-US .btn-primary {
  padding: 10px 28px;
  min-width: 120px;
}
```

#### 2. å¯¼èˆªèœå•

```css
.nav-item {
  padding: 12px 20px;
  min-width: 80px;
  text-align: center;
}

.lang-zh-CN .nav-item {
  padding: 12px 16px;
  min-width: 60px;
}

.lang-en-US .nav-item {
  padding: 12px 24px;
  min-width: 100px;
}
```

#### 3. è¡¨å•æ ‡ç­¾

```css
.form-item__label {
  display: inline-block;
  width: 100px;
  text-align: right;
  margin-right: 12px;
}

.lang-zh-CN .form-item__label {
  width: 70px; /* ä¸­æ–‡æ ‡ç­¾ï¼šç”¨æˆ·åã€å¯†ç  */
}

.lang-en-US .form-item__label {
  width: 130px; /* è‹±æ–‡æ ‡ç­¾ï¼šUsernameã€Password */
}
```

#### 4. æç¤ºæ–‡æœ¬

```css
.tooltip-text {
  max-width: 200px;
  padding: 8px 12px;
  line-height: 1.5;
}

.lang-zh-CN .tooltip-text {
  max-width: 160px;
  line-height: 1.6;
}

.lang-en-US .tooltip-text {
  max-width: 240px;
  line-height: 1.4;
  word-break: break-word;
}
```

### æ³¨æ„äº‹é¡¹

âœ… **æ¨èåšæ³•ï¼š**
- åœ¨æ ¹èŠ‚ç‚¹è®¾ç½®è¯­è¨€ classï¼Œæ–¹ä¾¿å…¨å±€æ ·å¼é€‚é…
- åŒæ—¶è®¾ç½® `<html lang="xx">` å±æ€§ï¼Œæœ‰åˆ©äº SEO
- ä¸ºå…³é”® UI ç»„ä»¶ï¼ˆæŒ‰é’®ã€æ ‡ç­¾ã€æ ‡é¢˜ï¼‰è®¾ç½®è¯­è¨€é€‚é…æ ·å¼
- ä¸­æ–‡ä½¿ç”¨ `word-break: break-all`ï¼Œè‹±æ–‡ä½¿ç”¨ `word-break: break-word`
- æ ¹æ®å®é™…å†…å®¹é•¿åº¦è°ƒæ•´å®½åº¦å’Œé«˜åº¦

âŒ **é¿å…åšæ³•ï¼š**
- ä¸è¦ä¸ºæ‰€æœ‰å…ƒç´ éƒ½è®¾ç½®è¯­è¨€æ ·å¼ï¼ˆåªé’ˆå¯¹æœ‰å·®å¼‚çš„ï¼‰
- ä¸è¦ç¡¬ç¼–ç å›ºå®šå®½åº¦ï¼ˆä½¿ç”¨ min-width å’Œ max-widthï¼‰
- ä¸è¦å¿½ç•¥é•¿æ–‡æœ¬çš„æ¢è¡Œå¤„ç†
- ä¸è¦åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ `navigator.language`ï¼ˆåº”è¯¥ä½¿ç”¨ i18n çš„ languageï¼‰

## æœ€ä½³å®è·µ

### 1. è¯­æ–™æ–‡ä»¶ç»„ç»‡

âœ… **æ¨èåšæ³•ï¼š**
```json
{
  "user": {
    "list": {
      "title": "ç”¨æˆ·åˆ—è¡¨",
      "empty": "æš‚æ— æ•°æ®"
    },
    "detail": {
      "title": "ç”¨æˆ·è¯¦æƒ…"
    }
  }
}
```

âŒ **é¿å…åšæ³•ï¼š**
```json
{
  "userListTitle": "ç”¨æˆ·åˆ—è¡¨",
  "userListEmpty": "æš‚æ— æ•°æ®",
  "userDetailTitle": "ç”¨æˆ·è¯¦æƒ…"
}
```

### 2. å˜é‡å‘½å

âœ… **æ¨èä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡åï¼š**
```json
{
  "welcome": "æ¬¢è¿ï¼Œ{{userName}}ï¼",
  "orderInfo": "è®¢å•å·ï¼š{{orderId}}ï¼Œé‡‘é¢ï¼š{{amount}}"
}
```

âŒ **é¿å…ä½¿ç”¨æ— æ„ä¹‰çš„å˜é‡åï¼š**
```json
{
  "welcome": "æ¬¢è¿ï¼Œ{{0}}ï¼",
  "orderInfo": "è®¢å•å·ï¼š{{a}}ï¼Œé‡‘é¢ï¼š{{b}}"
}
```

### 3. ä¿æŒè¯­æ–™åŒæ­¥

- âœ… æ‰€æœ‰è¯­è¨€çš„è¯­æ–™æ–‡ä»¶ç»“æ„å¿…é¡»ä¸€è‡´
- âœ… æ·»åŠ æ–°è¯­æ–™æ—¶ï¼ŒåŒæ—¶æ›´æ–°æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬
- âœ… ä½¿ç”¨ç›¸åŒçš„ key ç»“æ„

```json
// zh-CN/common.json
{
  "button": {
    "submit": "æäº¤",
    "cancel": "å–æ¶ˆ"
  }
}

// en-US/common.json
{
  "button": {
    "submit": "Submit",
    "cancel": "Cancel"
  }
}
```

### 4. é¿å…åœ¨è¯­æ–™ä¸­ä½¿ç”¨ HTML

âŒ **é”™è¯¯ï¼š**
```json
{
  "welcome": "<strong>æ¬¢è¿</strong>å›æ¥ï¼"
}
```

âœ… **æ­£ç¡®ï¼š**
```jsx
// åœ¨ç»„ä»¶ä¸­å¤„ç†æ ·å¼
<p>
  <strong>{t('welcome.prefix')}</strong>
  {t('welcome.suffix')}
</p>
```

### 5. ä½¿ç”¨å‘½åç©ºé—´éš”ç¦»

```jsx
// âœ… æ¨èï¼šæ˜ç¡®æŒ‡å®šå‘½åç©ºé—´
const { t } = useTranslation(['pages', 'messages'])
t('pages:user.title')
t('messages:success.created')

// âœ… ä¹Ÿå¯ä»¥ï¼šä½¿ç”¨å•ä¸ªå‘½åç©ºé—´
const { t } = useTranslation('pages')
t('user.title')
```

### 6. æå–å¯å¤ç”¨çš„è¯­æ–™

```json
// common.json - é€šç”¨è¯­æ–™
{
  "action": {
    "create": "åˆ›å»º",
    "edit": "ç¼–è¾‘",
    "delete": "åˆ é™¤"
  }
}

// pages.json - é¡µé¢ç‰¹å®šè¯­æ–™å¤ç”¨ common
{
  "user": {
    "createUser": "åˆ›å»ºç”¨æˆ·",  // å¯ä»¥ç”¨ t('common:action.create') + 'ç”¨æˆ·'
    "editUser": "ç¼–è¾‘ç”¨æˆ·"
  }
}
```

### 7. é»˜è®¤å€¼å’Œå›é€€

```jsx
// ä½¿ç”¨é»˜è®¤å€¼
t('some.missing.key', 'é»˜è®¤æ–‡æœ¬')

// æ£€æŸ¥ç¿»è¯‘æ˜¯å¦å­˜åœ¨
i18n.exists('some.key')
```

### 8. Context é›†æˆï¼ˆå¯é€‰ï¼‰

å¦‚æœé¡¹ç›®ä½¿ç”¨ Context ç®¡ç†å…¨å±€çŠ¶æ€ï¼Œå¯ä»¥å°† i18n é›†æˆè¿›å»ï¼š

```jsx
// src/context/AppContext.jsx
import { createContext, useContext } from 'react'
import { useTranslation } from 'react-i18next'

const AppContext = createContext(null)

export function AppProvider({ children }) {
  const { t, i18n } = useTranslation()

  const changeLanguage = (lng) => {
    i18n.changeLanguage(lng)
    localStorage.setItem('language', lng)
  }

  const value = {
    t,
    i18n,
    language: i18n.language,
    changeLanguage,
  }

  return <AppContext.Provider value={value}>{children}</AppContext.Provider>
}

export function useApp() {
  const context = useContext(AppContext)
  if (!context) {
    throw new Error('useApp must be used within AppProvider')
  }
  return context
}
```

## ä¸é¡¹ç›®è§„èŒƒé›†æˆ

### å•äººé¡¹ç›®ï¼ˆä¸­è´¨é‡ï¼‰

- âœ… å¿…é¡»ï¼šåŸºæœ¬çš„å¤šè¯­è¨€æ”¯æŒï¼ˆzh-CN, en-USï¼‰
- âœ… å¿…é¡»ï¼šä½¿ç”¨å‘½åç©ºé—´ç»„ç»‡è¯­æ–™
- ğŸ’¡ å»ºè®®ï¼šå…³é”®é¡µé¢å’Œç»„ä»¶æä¾›ç¿»è¯‘
- ğŸ†“ å¯é€‰ï¼šå®Œæ•´çš„å¤šè¯­è¨€è¦†ç›–

### å°ç»„é¡¹ç›®ï¼ˆé«˜è´¨é‡ï¼‰

- âœ… å¿…é¡»ï¼šå®Œæ•´çš„å¤šè¯­è¨€æ”¯æŒ
- âœ… å¿…é¡»ï¼šæ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬éƒ½è¦ç¿»è¯‘
- âœ… å¿…é¡»ï¼šè¯­æ–™æ–‡ä»¶ç»“æ„ä¸€è‡´
- âœ… å¿…é¡»ï¼šæ–°å¢åŠŸèƒ½åŒæ­¥æ›´æ–°æ‰€æœ‰è¯­è¨€
- ğŸ’¡ å»ºè®®ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æ£€æŸ¥ç¿»è¯‘å®Œæ•´æ€§

## å·¥å…·æ¨è

### VS Code æ’ä»¶

- **i18n Ally** - æä¾›è¯­æ–™æ–‡ä»¶çš„æ™ºèƒ½æç¤ºå’Œç®¡ç†

### ç¿»è¯‘ç®¡ç†

- ä½¿ç”¨åœ¨çº¿ç¿»è¯‘ç®¡ç†å¹³å°ï¼ˆå¦‚ Lokaliseã€Crowdinï¼‰
- æˆ–ä½¿ç”¨ Google Sheets ç®¡ç†ç¿»è¯‘
- å®šæœŸåŒæ­¥ç¿»è¯‘åˆ°é¡¹ç›®ä¸­

## æ€§èƒ½ä¼˜åŒ–

### æŒ‰éœ€åŠ è½½è¯­è¨€åŒ…ï¼ˆå¯é€‰ï¼‰

å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½è¯­è¨€åŒ…ï¼š

```javascript
// src/locales/index.js
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import Backend from 'i18next-http-backend'

i18n
  .use(Backend) // ä½¿ç”¨åç«¯åŠ è½½å™¨
  .use(initReactI18next)
  .init({
    lng: 'zh-CN',
    fallbackLng: 'zh-CN',
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json', // æŒ‰éœ€åŠ è½½è·¯å¾„
    },
  })
```

## æ€»ç»“

i18n å›½é™…åŒ–è§„èŒƒè¦ç‚¹ï¼š

- âœ… ä½¿ç”¨ react-i18next ä½œä¸º i18n åº“
- âœ… è¯­æ–™æ–‡ä»¶æŒ‰å‘½åç©ºé—´ç»„ç»‡ï¼ˆcommonã€pagesã€componentsã€messagesï¼‰
- âœ… è¯­è¨€ä»£ç ä½¿ç”¨æ ‡å‡†æ ¼å¼ï¼ˆzh-CNã€en-USï¼‰
- âœ… ä¿æŒæ‰€æœ‰è¯­è¨€çš„è¯­æ–™ç»“æ„ä¸€è‡´
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å
- âœ… ç»„ä»¶ä¸­é€šè¿‡ useTranslation hook ä½¿ç”¨ç¿»è¯‘
- âœ… æä¾›è¯­è¨€åˆ‡æ¢åŠŸèƒ½
- âŒ é¿å…åœ¨è¯­æ–™ä¸­åµŒå…¥ HTML
- âŒ é¿å…ä½¿ç”¨æ— æ„ä¹‰çš„ key åç§°

é€‰æ‹©æ˜¯å¦ä½¿ç”¨ i18nï¼š
- **éœ€è¦å¤šè¯­è¨€æ”¯æŒ** â†’ ä½¿ç”¨æœ¬è§„èŒƒ
- **ä»…å•ä¸€è¯­è¨€** â†’ ä¸éœ€è¦ i18n
